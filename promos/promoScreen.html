<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<style>

body{
  margin:0;
  background:black;
  overflow:hidden;
}

/* SCREEN SIZE */
#screen{
  width:1564px;
  height:880px;
  position:relative;
  overflow:hidden;
}

/* IMAGE HOLDER */
#promoWrapper{
  width:100%;
  height:100%;
  position:absolute;
}

/* IMAGE */
#promoImage{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* ======================
   LOWER THIRD STYLE SLIDE
====================== */

.slide-in{
  animation:slideIn .6s ease forwards;
}

.slide-out{
  animation:slideOut .6s ease forwards;
}

@keyframes slideIn{
  from{
    transform:translateX(100%);
    opacity:0;
  }
  to{
    transform:translateX(0);
    opacity:1;
  }
}

@keyframes slideOut{
  from{
    transform:translateX(0);
    opacity:1;
  }
  to{
    transform:translateX(-100%);
    opacity:0;
  }
}

</style>
</head>

<body>

<div id="screen">
  <div id="promoWrapper">
    <img id="promoImage">
  </div>
</div>

<script>

let currentImage = null;

const ANIMATION_TIME = 600;

function updateFromStorage(){

  const promo =
    JSON.parse(localStorage.getItem("currentPromo"));

  if(!promo || !promo.image) return;

  if(promo.image === currentImage) return;

  currentImage = promo.image;

  const wrapper =
    document.getElementById("promoWrapper");

  const img =
    document.getElementById("promoImage");

  /* slide out */
  wrapper.classList.remove("slide-in");
  wrapper.classList.add("slide-out");

  setTimeout(()=>{

    img.src =
      "https://totalmixcreative.github.io/graphics/promos/"
      + promo.image;

    wrapper.classList.remove("slide-out");
    wrapper.classList.add("slide-in");

  }, ANIMATION_TIME);
}

/* keep checking for lower third updates */
setInterval(updateFromStorage, 500);

</script>

</body>
</html>